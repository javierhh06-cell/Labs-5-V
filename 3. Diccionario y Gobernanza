# docs/diccionario.md

# Diccionario de Datos - Esquema Can√≥nico

## üéØ Esquema Can√≥nico Objetivo

La capa **Silver** seguir√° este esquema unificado:

| Campo | Tipo | Formato | Descripci√≥n | Reglas de Validaci√≥n |
|-------|------|---------|-------------|---------------------|
| `date` | Date | YYYY-MM-DD | Fecha del registro | Requerido, debe ser fecha v√°lida |
| `partner` | String | Texto normalizado | Identificador del partner/compa√±√≠a | Requerido, min 2 caracteres |
| `amount` | Float | EUR (2 decimales) | Monto monetario en euros | ‚â• 0, m√°ximo 6 decimales en bruto |

## üîÑ Mapeos Origen ‚Üí Can√≥nico

### Ejemplos T√≠picos de Transformaci√≥n

| Origen (Campo/Formato) | Transformaci√≥n Aplicada | Can√≥nico (Resultado) |
|------------------------|------------------------|---------------------|
| `FECHA: "15/03/2024"` (DD/MM/YYYY) | Parseo y reformateo | `date: "2024-03-15"` |
| `Fecha: "Mar-15-2024"` (MMM-DD-YYYY) | Parseo con locale ingl√©s | `date: "2024-03-15"` |
| `PARTNER: "COMPANY A"` (may√∫sculas) | Lowercase + trim | `partner: "company a"` |
| `Partner: "Co. B"` (abreviado) | Normalizaci√≥n diccionario | `partner: "company b"` |
| `AMOUNT: "1.250,50"` (EUR con punto decimal europeo) | Replace comma‚Üídot, limpieza | `amount: 1250.50` |
| `Monto: "$1,500.00"` (USD con formato americano) | Conversi√≥n EUR + limpieza | `amount: 1365.75` (tipo cambio 0.91) |

## üìä Estructuras por Capa

### Capa Bronze (Raw Preservado)
- **date_raw**: String (formato original)
- **partner_raw**: String (texto original)  
- **amount_raw**: String (valor original)
- **source_file**: String (origen del dato)
- **ingestion_timestamp**: Timestamp

### Capa Silver (Normalizado)
- **date**: Date (YYYY-MM-DD)
- **partner**: String (normalizado)
- **amount**: Float (EUR)
- **currency**: String (siempre "EUR")
- **data_quality_score**: Float (0-1)
- **transformation_notes**: String (metadatos)

#Docs/gobernanza.md

# Gobernanza de Datos

## üìú Origen y Linaje de Datos

### Fuentes de Datos
| Fuente | Frecuencia | Responsable | Sensibilidad |
|--------|------------|-------------|--------------|
| CSV Partner A | Diaria | √Årea Comercial | Baja |
| CSV Partner B | Semanal | √Årea Operaciones | Media |
| CSV Partner C | Mensual | √Årea Finanzas | Alta |

### Linaje del Pipeline


## ‚úÖ Validaciones M√≠nimas por Capa

### Capa Raw ‚Üí Bronze
- [ ] **Schema Validation**: Columnas m√≠nimas presentes
- [ ] **Encoding**: UTF-8 v√°lido
- [ ] **Integridad**: Archivo no corrupto

### Capa Bronze ‚Üí Silver  
- [ ] **Completitud**: `date` y `partner` no nulos
- [ ] **Formato**: `date` convertible a YYYY-MM-DD
- [ ] **Rango**: `amount` ‚â• 0 y < l√≠mite business
- [ ] **Consistencia**: `partner` existe en cat√°logo

## üîê Pol√≠tica de M√≠nimos Privilegios

### Roles y Permisos
| Rol | Acceso Raw | Acceso Bronze | Acceso Silver | Acceso Gold |
|-----|------------|---------------|---------------|-------------|
| **Data Engineer** | Lectura/Escritura | Lectura/Escritura | Lectura/Escritura | Lectura/Escritura |
| **Data Analyst** | Sin acceso | Lectura limitada | Lectura completa | Lectura/Escritura |
| **Business User** | Sin acceso | Sin acceso | Lectura via API | Lectura dashboard |

### Reglas de Acceso
- **Raw**: Solo ingenier√≠a de datos
- **Bronze**: Lectura para debugging autorizado
- **Silver**: Acceso est√°ndar para an√°lisis
- **Gold**: Datos agregados para negocio

## üîç Trazabilidad y Auditor√≠a

### Metadatos Obligatorios
Cada registro debe incluir:
- **source_file**: Origen del dato
- **ingestion_batch**: Lote de ingesta  
- **processing_timestamp**: Cu√°ndo se proces√≥
- **data_quality_score**: Puntuaci√≥n calidad (0-1)
- **validation_errors**: Errores detectados

### Logs de Auditor√≠a
| Evento | Log Level | Informaci√≥n Capturada |
|--------|-----------|---------------------|
| Ingesta archivo | INFO | filename, records_count, checksum |
| Error validaci√≥n | WARNING | field, error_type, record_id |
| Transformaci√≥n exitosa | INFO | source_records, target_records |

## üë• Roles y Responsabilidades

### Data Owner (Por dominio)
- Define reglas de negocio
- Aprueba cambios de schema
- Responsable de calidad origen

### Data Steward  
- Mantiene diccionario de datos
- Monitorea m√©tricas calidad
- Resuelve dudas de negocio

### Data Engineer
- Implementa pipelines
- Mantiene infraestructura  
- Garantiza SLA procesamiento

### Data Consumer
- Utiliza datos para an√°lisis
- Reporta problemas calidad
- Sigue pol√≠ticas acceso
